<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Importing and manipulating periodic time seires data • pcts</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Importing and manipulating periodic time seires data">
<meta property="og:description" content="pcts">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pcts</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.15-0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/pcts_data.html">Importing and manipulating periodic time seires data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/GeoBosh/pcts/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Importing and manipulating periodic time seires data</h1>
                        <h4 class="author">Georgi N. Boshnakov</h4>
            
            <h4 class="date">2020-04-17</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/GeoBosh/pcts/blob/master/vignettes/pcts_data.Rmd"><code>vignettes/pcts_data.Rmd</code></a></small>
      <div class="hidden name"><code>pcts_data.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pcts</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'pcts'</span>
<span class="co">#&gt; The following object is masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     date</span>
<span class="no">pd</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageDescription</a></span>(<span class="st">"pcts"</span>)</pre></body></html></div>
<p>This vignette is part of package pcts, version 0.15-0.</p>
<p>The intended mode of work with time series in package <code><a href="../reference/pcts-methods.html">pcts()</a></code> is that users create periodic time series using function <code><a href="../reference/pcts-methods.html">pcts()</a></code> and then operate on the object created by it. <code><a href="../reference/pcts-methods.html">pcts()</a></code> accepts base R data objects, such as “ts”, “mts”, “numeric2,”matrix2, “data. frame”, as well as some time series classes with regular time from other packages, including “zooreg” (other classes can be added if required).</p>
<p>Package <code>pcts</code> provides two native classes for periodic time series: “PeriodicTS” and “PeriodicMTS” for univariate and multivariate time series, respectively. There are also some classes serving as wrappers for the base “ts” and “mts” classes and some classes from other packages, such as “zoo”, if the original classes need to be preserved.</p>
<p>When supplied with a time series object, <code><a href="../reference/pcts-methods.html">pcts()</a></code> gets the time information from it. For example, the <code>AirPassengers</code> is a monthly time series starting in <code>{r} start(AirPassengers)</code> from base R, so it is converted to a periodic time series with a monthly cycle and the same start time:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">ap</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/pcts-methods.html">pcts</a></span>(<span class="no">AirPassengers</span>)
<span class="no">ap</span>
<span class="co">#&gt; An object of class "PeriodicTS"</span>
<span class="co">#&gt; Slot "cycle": Start:  1949   January </span>
<span class="co">#&gt; Cycle:  MonthYearCycle </span>
<span class="co">#&gt; Number of seasons: 12 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</span>
<span class="co">#&gt; 1949 112 118 132 129 121 135 148 148 136 119 104 118</span>
<span class="co">#&gt; 1950 115 126 141 135 125 149 170 170 158 133 114 140</span>
<span class="co">#&gt; 1951 145 150 178 163 172 178 199 199 184 162 146 166</span>
<span class="co">#&gt; 1952 171 180 193 181 183 218 230 242 209 191 172 194</span>
<span class="co">#&gt; 1953 196 196 236 235 229 243 264 272 237 211 180 201</span>
<span class="co">#&gt; 1954 204 188 235 227 234 264 302 293 259 229 203 229</span>
<span class="co">#&gt; 1955 242 233 267 269 270 315 364 347 312 274 237 278</span>
<span class="co">#&gt; 1956 284 277 317 313 318 374 413 405 355 306 271 306</span>
<span class="co">#&gt; 1957 315 301 356 348 355 422 465 467 404 347 305 336</span>
<span class="co">#&gt; 1958 340 318 362 348 363 435 491 505 404 359 310 337</span>
<span class="co">#&gt; 1959 360 342 406 396 420 472 548 559 463 407 362 405</span>
<span class="co">#&gt; 1960 417 391 419 461 472 535 622 606 508 461 390 432</span></pre></body></html></div>
<p>Get the data from Mar 1952 to Feb 1959:</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/stats/window.html">window</a></span>(<span class="no">ap</span>, <span class="kw">start</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1952</span>, <span class="fl">3</span>))
<span class="co">#&gt; An object of class "PeriodicTS"</span>
<span class="co">#&gt; Slot "cycle": Start:  1952   March </span>
<span class="co">#&gt; Cycle:  MonthYearCycle </span>
<span class="co">#&gt; Number of seasons: 12 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</span>
<span class="co">#&gt; 1952         193 181 183 218 230 242 209 191 172 194</span>
<span class="co">#&gt; 1953 196 196 236 235 229 243 264 272 237 211 180 201</span>
<span class="co">#&gt; 1954 204 188 235 227 234 264 302 293 259 229 203 229</span>
<span class="co">#&gt; 1955 242 233 267 269 270 315 364 347 312 274 237 278</span>
<span class="co">#&gt; 1956 284 277 317 313 318 374 413 405 355 306 271 306</span>
<span class="co">#&gt; 1957 315 301 356 348 355 422 465 467 404 347 305 336</span>
<span class="co">#&gt; 1958 340 318 362 348 363 435 491 505 404 359 310 337</span>
<span class="co">#&gt; 1959 360 342 406 396 420 472 548 559 463 407 362 405</span>
<span class="co">#&gt; 1960 417 391 419 461 472 535 622 606 508 461 390 432</span>
<span class="fu"><a href="https://rdrr.io/r/stats/window.html">window</a></span>(<span class="no">ap</span>, <span class="kw">end</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1959</span>, <span class="fl">2</span>))
<span class="co">#&gt; An object of class "PeriodicTS"</span>
<span class="co">#&gt; Slot "cycle": Start:  1949   January </span>
<span class="co">#&gt; Cycle:  MonthYearCycle </span>
<span class="co">#&gt; Number of seasons: 12 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</span>
<span class="co">#&gt; 1949 112 118 132 129 121 135 148 148 136 119 104 118</span>
<span class="co">#&gt; 1950 115 126 141 135 125 149 170 170 158 133 114 140</span>
<span class="co">#&gt; 1951 145 150 178 163 172 178 199 199 184 162 146 166</span>
<span class="co">#&gt; 1952 171 180 193 181 183 218 230 242 209 191 172 194</span>
<span class="co">#&gt; 1953 196 196 236 235 229 243 264 272 237 211 180 201</span>
<span class="co">#&gt; 1954 204 188 235 227 234 264 302 293 259 229 203 229</span>
<span class="co">#&gt; 1955 242 233 267 269 270 315 364 347 312 274 237 278</span>
<span class="co">#&gt; 1956 284 277 317 313 318 374 413 405 355 306 271 306</span>
<span class="co">#&gt; 1957 315 301 356 348 355 422 465 467 404 347 305 336</span>
<span class="co">#&gt; 1958 340 318 362 348 363 435 491 505 404 359 310 337</span>
<span class="co">#&gt; 1959 360 342</span></pre></body></html></div>
<p>Take the summer months only:</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/stats/window.html">window</a></span>(<span class="no">ap</span>, <span class="kw">seasons</span> <span class="kw">=</span> <span class="fl">7</span>:<span class="fl">9</span>)
<span class="co">#&gt; An object of class "PeriodicTS"</span>
<span class="co">#&gt; Slot "cycle": Start:  1949   July </span>
<span class="co">#&gt; Cycle:  PartialCycle </span>
<span class="co">#&gt; Number of seasons: 3 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      Jul Aug Sep</span>
<span class="co">#&gt; 1949 148 148 136</span>
<span class="co">#&gt; 1950 170 170 158</span>
<span class="co">#&gt; 1951 199 199 184</span>
<span class="co">#&gt; 1952 230 242 209</span>
<span class="co">#&gt; 1953 264 272 237</span>
<span class="co">#&gt; 1954 302 293 259</span>
<span class="co">#&gt; 1955 364 347 312</span>
<span class="co">#&gt; 1956 413 405 355</span>
<span class="co">#&gt; 1957 465 467 404</span>
<span class="co">#&gt; 1958 491 505 404</span>
<span class="co">#&gt; 1959 548 559 463</span>
<span class="co">#&gt; 1960 622 606 508</span></pre></body></html></div>
<p>The dataset <code>dataFranses1996</code> contains a multivariate quarterly time series. See <code><a href="../reference/dataFranses1996.html">?dataFranses1996</a></code> for more information. Here are some excerpts from it:</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="no">dataFranses1996</span>)
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span>(<span class="no">dataFranses1996</span>)
<span class="co">#&gt; [1] "mts"    "ts"     "matrix"</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span>(<span class="no">dataFranses1996</span>)
<span class="co">#&gt;  [1] "year"                            "USTotalIPI"                     </span>
<span class="co">#&gt;  [3] "CanadaUnemployment"              "GermanyGNP"                     </span>
<span class="co">#&gt;  [5] "UKTotalInvestment"               "SA_USTotalIPI"                  </span>
<span class="co">#&gt;  [7] "SA_CanadaUnemployment"           "SA_GermanyGNP"                  </span>
<span class="co">#&gt;  [9] "UKGDP"                           "UKTotalConsumption"             </span>
<span class="co">#&gt; [11] "UKNondurablesConsumption"        "UKExport"                       </span>
<span class="co">#&gt; [13] "UKImport"                        "UKPublicInvestment"             </span>
<span class="co">#&gt; [15] "UKWorkforce"                     "SwedenNondurablesConsumption"   </span>
<span class="co">#&gt; [17] "SwedenDisposableIncome"          "SA_SwedenNondurablesConsumption"</span>
<span class="co">#&gt; [19] "SA_SwedenDisposableIncome"</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span>(<span class="no">dataFranses1996</span>) <span class="co"># c(148, 19)</span>
<span class="co">#&gt; [1] 148  19</span></pre></body></html></div>
<p>It can be converrted to periodic time series with</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="no">pcfr</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/pcts-methods.html">pcts</a></span>(<span class="no">dataFranses1996</span>)
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span>(<span class="no">pcfr</span>)[<span class="fl">2</span>:<span class="fl">3</span>]
<span class="co">#&gt; [1] "USTotalIPI"         "CanadaUnemployment"</span></pre></body></html></div>
<p>The Franses’ time series is quite large and for convenience in presentation we work with parts of it below.</p>
<p>Let’s take one of the time series:</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">tipi</span> <span class="kw">&lt;-</span> <span class="no">dataFranses1996</span>[ , <span class="st">"USTotalIPI"</span>]
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(<span class="no">tipi</span>)</pre></body></html></div>
<p><img src="pcts_data_files/figure-html/unnamed-chunk-7-1.png" width="700"> Convert <code>tipi</code> to PeriodicTS and remove NA’s at the start and end</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="no">pctipi</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/pcts-methods.html">pcts</a></span>(<span class="no">tipi</span>)
<span class="no">pctipi</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/window.html">window</a></span>(<span class="no">pctipi</span>, <span class="kw">start</span> <span class="kw">=</span> <span class="fu"><a href="../reference/availStart.html">availStart</a></span>(<span class="no">pctipi</span>), <span class="kw">end</span> <span class="kw">=</span> <span class="fu"><a href="../reference/availStart.html">availEnd</a></span>(<span class="no">pctipi</span>))
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(<span class="no">pctipi</span>)</pre></body></html></div>
<p><img src="pcts_data_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<p>subset as “PeriodicMTS”</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="no">pcfr2to3</span> <span class="kw">&lt;-</span> <span class="no">pcfr</span>[<span class="fl">2</span>:<span class="fl">3</span>]
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(<span class="no">pcfr2to3</span>)</pre></body></html></div>
<p><img src="pcts_data_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<p>“[” gives “PeriodicMTS” even with length one arg.</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="no">pcfr2to2</span>  <span class="kw">&lt;-</span> <span class="no">pcfr</span>[<span class="fl">2</span>]
<span class="no">pcfr2to2a</span> <span class="kw">&lt;-</span> <span class="no">pcfr</span>[<span class="st">"USTotalIPI"</span>] <span class="co"># same</span></pre></body></html></div>
<p>Use “[[” or <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> to get “PeriodicTS”</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="no">pcfr2</span> <span class="kw">&lt;-</span> <span class="no">pcfr</span><span class="kw">[[</span><span class="fl">2</span>]]
<span class="no">pcfr2a</span> <span class="kw">&lt;-</span> <span class="no">pcfr</span><span class="kw">[[</span><span class="st">"USTotalIPI"</span>]] <span class="co"># same</span>
<span class="no">pcfr2b</span> <span class="kw">&lt;-</span> <span class="no">pcfr</span>$<span class="no">USTotalIPI</span>      <span class="co"># same</span>
<span class="fu"><a href="https://rdrr.io/r/base/identical.html">identical</a></span>(<span class="no">pcfr2</span>, <span class="no">pcfr2a</span>) <span class="co"># TRUE</span>
<span class="co">#&gt; [1] TRUE</span>
<span class="fu"><a href="https://rdrr.io/r/base/identical.html">identical</a></span>(<span class="no">pcfr2</span>, <span class="no">pcfr2b</span>) <span class="co"># TRUE</span>
<span class="co">#&gt; [1] TRUE</span>

<span class="no">c1</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/time.html">cycle</a></span>(<span class="no">pcfr</span>)
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">c1</span>, <span class="fl">8</span>)
<span class="co">#&gt; An object of class "PeriodicTS"</span>
<span class="co">#&gt; Slot "cycle": Start:  1955   Quarter_1 </span>
<span class="co">#&gt; Cycle:  QuarterYearCycle </span>
<span class="co">#&gt; Number of seasons: 4 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;      Q1 Q2 Q3 Q4</span>
<span class="co">#&gt; 1955  1  2  3  4</span>
<span class="co">#&gt; 1956  1  2  3  4</span>
<span class="fu"><a href="https://rdrr.io/r/stats/time.html">frequency</a></span>(<span class="no">pcfr</span>)
<span class="co">#&gt; [1] 4</span></pre></body></html></div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Georgi N. Boshnakov.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
