<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Functions for some basic operations with seasons."><title>Functions for some basic operations with seasons — sl_utils • pcts</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Functions for some basic operations with seasons — sl_utils"><meta property="og:description" content="Functions for some basic operations with seasons."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">pcts</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.15.2.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/pcts_data.html">Importing and manipulating periodic time series data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/GeoBosh/pcts/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Functions for some basic operations with seasons</h1>
      
      <div class="d-none name"><code>sl_utils.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Functions for some basic operations with seasons.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">toSeason</span><span class="op">(</span><span class="va">t</span>, <span class="va">period</span>, t1 <span class="op">=</span> <span class="fl">1</span>, from <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="fu">toSeasonPair</span><span class="op">(</span><span class="va">t</span>, <span class="va">s</span>, <span class="va">period</span>, <span class="va">...</span><span class="op">)</span>
<span class="fu">ttTosl</span><span class="op">(</span><span class="va">r</span>, <span class="va">period</span><span class="op">)</span>
<span class="fu">ttmatToslPairs</span><span class="op">(</span><span class="va">i</span>, <span class="va">j</span>, <span class="va">period</span><span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <p><!-- %  \item{lags}{ todo: describe! } --><!-- %  \item{maxlag}{ todo: describe! } --></p>
<dl><dt>r</dt>
<dd><p>covariance matrix, see `Details'.</p></dd>
<dt>t</dt>
<dd><p>a vector of integers, representing times.</p></dd>
<dt>s</dt>
<dd><p>a vector of integers, representing times.</p></dd>
<dt>period</dt>
<dd><p>the number of seasons.</p></dd>
<dt>t1</dt>
<dd><p>time corresponding to the first season, an integer number.</p></dd>
<dt>from</dt>
<dd><p>1 or 0, depending on whether the season numbers start from
    1 or 0.</p></dd>
<dt>i</dt>
<dd><p>a vector of integers.</p></dd>
<dt>j</dt>
<dd><p>a vector of integers.</p></dd>
<dt>...</dt>
<dd><p>todo: describe!</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    

<p><code>ttmatToslPairs(i,j,period)</code> transforms time-time pairs to
 season-lag pairs. The time pairs are obtained by pairing each element
 of <code>i</code> with each element of <code>j</code>. A four column matrix is
 created with one row for each pair <code>(t,s)</code>, such that
 <code>t=i[m]</code> and <code>s=j[n]</code> for some <code>m</code> and <code>n</code>.  The
 row is <code>m, n, s, l</code>, where <code>(s,l)</code> is the season-lag pair
 corresponding to <code>(t,s)</code>.</p>
<p><code>ttTosl(r,period)</code> converts autocovariances given in a covariance
 matrix (i.e. in ``tt'' form) to the ``sl'' form. The result is a
 <code>period x (maxlag+1)</code> matrix, where <code>maxlag</code> is the maximal
 lag available in <code>r</code>. Entries for which no values are available
 are filled with <code>NA</code>'s.  Warning is given if contradictory entries
 are found (i.e. if <code>r</code> is not from a periodically correlated
 process with the given period).</p>
<p><code>toSeason(t,period,t1=1,from=1)</code> returns the season corresponding
 to <code>t</code>.  <code>t1</code> is a time (integer) whose season is the first
 season, <code>from</code> is 1 if the numbering of seasons is 1,2,...,period,
 or 0 if the numbering of seasons is 0,1,...,period-1.  Other values for
 <code>from</code> are not admissible (but not checked).  <strong>Note:</strong> some
 of the functions in this package implicitly assume that <code>t1=1</code> and
 <code>from=1</code>.</p>
<p><code>toSeasonPair(t,s,period)</code> converts the ``tt'' pair <code>t,s</code> to
 ``sl'' pair and returns the result in the form of a list with elements
 <code>season</code> and <code>lag</code>. Currently <code>t</code> and <code>s</code> must be
 scalars.</p>
<p><code>pc.omitneg</code> helps to implement dropping of negative indices in
 season-lag objects. It returns its first argument, <code>lags</code>, if all
 of its elements are non-negative. Otherwise, all elements of
 <code>lags</code> must be non-positive. In this case the function creates the
 vector <code>0:maxlag</code> and drops the elements specified by lags.  Note
 that the default indexing will not work properly since zero elements in
 an index are omitted (and there are such indices in season-lag
 objects).</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>for <code>ttmatToslPairs</code>, a matrix with four columns;
  for <code>ttTosl</code>, a matrix with <code>period</code> rows;
  for <code>toSeason(t,period,t1=1,from=1)</code>, a vector of integers;
  for <code>toSeasonPair(t,s,period)</code>, a list with elements
<code>season</code> and <code>lag</code>;
  for <code>pc.omitneg</code>, a vector of lags (non-negative integers).</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Boshnakov GN, Iqelan BM (2009).
“Generation of time series models with given spectral properties.”
<em>J. Time Series Anal.</em>, <b>30</b>(3), 349--368.
ISSN 0143-9782, doi: <a href="https://doi.org/10.1111/j.1467-9892.2009.00617.x" class="external-link">10.1111/j.1467-9892.2009.00617.x</a>
.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Georgi N. Boshnakov</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    

<p>2013-10-24 - Corrected the description of the return value of
  <code>ttmatToslPairs</code>. It incorrectly stated that the first two
  columns are "tt" pair (they are actually indices in <code>i</code> and
  <code>j</code>).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># ttmatToslPairs</span></span>
<span class="r-in"><span class="fu">ttmatToslPairs</span><span class="op">(</span><span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span>  <span class="co"># 1, 1, 3, 0</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     [,1] [,2] [,3] [,4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tmp    1    1    3    0</span>
<span class="r-in"><span class="fu">ttmatToslPairs</span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span>  <span class="co"># 1, 1, 3, 1</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     [,1] [,2] [,3] [,4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tmp    1    1    3    1</span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">ttmatToslPairs</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">4</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     [,1] [,2] [,3] [,4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tmp    1    1    1    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tmp    1    2    2    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tmp    1    3    3    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tmp    1    4    4    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tmp    2    1    2    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tmp    2    2    2    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tmp    2    3    3    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tmp    2    4    4    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tmp    3    1    3    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tmp    3    2    3    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tmp    3    3    3    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tmp    3    4    4    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tmp    4    1    4    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tmp    4    2    4    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tmp    4    3    4    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tmp    4    4    4    0</span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">ttmatToslPairs</span><span class="op">(</span><span class="fl">3</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">4</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     [,1] [,2] [,3] [,4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tmp    1    1    3    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tmp    1    2    4    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tmp    2    1    4    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tmp    2    2    4    0</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># ttTosl -  :todo:</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># toSeason</span></span>
<span class="r-in"><span class="fu">toSeason</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">4</span><span class="op">)</span>           <span class="co"># 1 2 3 4  1 2 3 4  1 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 1 2 3 4 1 2 3 4 1 2</span>
<span class="r-in"><span class="fu">toSeason</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">4</span>, from <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="co"># 0 1 2 3  0 1 2 3  0 1</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 0 1 2 3 0 1 2 3 0 1</span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## first data is for 3rd quarter</span></span>
<span class="r-in"><span class="fu">toSeason</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">4</span>, t1 <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>  <span class="co"># 3 4 1 2 3 4 1 2 3 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 3 4 1 2 3 4 1 2 3 4</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># toSeasonPair</span></span>
<span class="r-in"><span class="fu">toSeasonPair</span><span class="op">(</span><span class="fl">3</span>, <span class="fl">3</span>, period<span class="op">=</span><span class="fl">4</span><span class="op">)</span> <span class="co"># season=3, lag = 0</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $season</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $lag</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span class="fu">toSeasonPair</span><span class="op">(</span><span class="fl">8</span>, <span class="fl">8</span>, period<span class="op">=</span><span class="fl">4</span><span class="op">)</span> <span class="co"># season=4, lag = 0</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $season</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $lag</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">toSeasonPair</span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span>, period<span class="op">=</span><span class="fl">4</span><span class="op">)</span> <span class="co"># season=3, lag = 1</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $season</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $lag</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span class="fu">toSeasonPair</span><span class="op">(</span><span class="fl">7</span>, <span class="fl">6</span>, period<span class="op">=</span><span class="fl">4</span><span class="op">)</span> <span class="co"># same</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $season</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $lag</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co">#### # pc.omitneg</span></span>
<span class="r-in"><span class="co">#### pc.omitneg(0:5,10) # 0:5, unchaged since all values &gt;= 0</span></span>
<span class="r-in"><span class="co">#### </span></span>
<span class="r-in"><span class="co">#### pc.omitneg(-(0:5),10) # 6:10, works like</span></span>
<span class="r-in"><span class="co">#### (0:10)[-(0:5 +1)]     # same</span></span>
<span class="r-in"><span class="co">#### </span></span>
<span class="r-in"><span class="co">#### # don't mix positive and negative numbers in pc.omitneg</span></span>
<span class="r-in"><span class="co">#### \dontrun{pc.omitneg(c(0,2,3,-4,5), 10)}</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Georgi N. Boshnakov.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer></div>

  

  

  </body></html>

